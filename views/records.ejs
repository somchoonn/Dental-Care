<%- include('partials/head', { title: title }) %>
<section class="wrap">
  <div class="brand">
    <div class="logo">ü¶∑</div>
    <div>
      <h1>‡πÄ‡∏ß‡∏ä‡∏£‡∏∞‡πÄ‡∏ö‡∏µ‡∏¢‡∏ô‡∏ú‡∏π‡πâ‡∏õ‡πà‡∏ß‡∏¢</h1>
      <p>‡∏î‡∏π/‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤ ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ú‡∏π‡πâ‡∏õ‡πà‡∏ß‡∏¢ ‡πÅ‡∏•‡∏∞‡∏•‡∏á‡∏ó‡∏∞‡πÄ‡∏ö‡∏µ‡∏¢‡∏ô‡∏ú‡∏π‡πâ‡∏õ‡πà‡∏ß‡∏¢‡πÉ‡∏´‡∏°‡πà</p>
    </div>
  </div>

  <div class="card">
    <div class="row between" style="margin-bottom:12px;">
      <h2 style="margin:0;">‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ú‡∏π‡πâ‡∏õ‡πà‡∏ß‡∏¢</h2>
      <a class="link" href="/records/new">+ ‡∏•‡∏á‡∏ó‡∏∞‡πÄ‡∏ö‡∏µ‡∏¢‡∏ô‡∏ú‡∏π‡πâ‡∏õ‡πà‡∏ß‡∏¢‡πÉ‡∏´‡∏°‡πà</a>
    </div>

    <div class="grid" style="gap:10px;">
      <label>‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤
        <input id="q" placeholder="‡∏ä‡∏∑‡πà‡∏≠ ‡∏ô‡∏≤‡∏°‡∏™‡∏Å‡∏∏‡∏• ‡∏´‡∏£‡∏∑‡∏≠‡πÄ‡∏•‡∏Ç‡∏ö‡∏±‡∏ï‡∏£‡∏õ‡∏£‡∏∞‡∏ä‡∏≤‡∏ä‡∏ô" oninput="filterPatients()" />
      </label>
    </div>

    <div style="overflow:auto; margin-top:10px;">
      <table style="width:100%; border-collapse:separate; border-spacing:0 8px;">
        <thead>
          <tr>
            <th style="text-align:left; padding:8px;">‡∏£‡∏´‡∏±‡∏™</th>
            <th style="text-align:left; padding:8px;">‡∏ä‡∏∑‡πà‡∏≠-‡∏ô‡∏≤‡∏°‡∏™‡∏Å‡∏∏‡∏•</th>
            <th style="text-align:left; padding:8px;">‡πÄ‡∏•‡∏Ç‡∏ö‡∏±‡∏ï‡∏£</th>
            <th style="text-align:left; padding:8px;">‡πÄ‡∏û‡∏®</th>
            <th style="text-align:left; padding:8px;">‡∏ß‡∏±‡∏ô‡πÄ‡∏Å‡∏¥‡∏î</th>
            <th style="text-align:left; padding:8px;">‡πÇ‡∏ó‡∏£</th>
          </tr>
        </thead>
        <tbody id="pt-body">
          <% patients.forEach(p => { %>
            <tr style="background:#fbfbff;border-radius:12px;">
              <td style="padding:10px 8px;"><%= p.id %></td>
              <td style="padding:10px 8px;"><%= p.titleName %><%= p.firstName %> <%= p.lastName %></td>
              <td style="padding:10px 8px;"><%= p.cid %></td>
              <td style="padding:10px 8px;"><%= p.gender %></td>
              <td style="padding:10px 8px;"><%= p.dob %></td>
              <td style="padding:10px 8px;"><%= p.phone %></td>
            </tr>
          <% }) %>
        </tbody>
      </table>
    </div>

    <div class="actions" style="margin-top:12px;">
      <a class="link" href="/register">+ ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏ö‡∏±‡∏ç‡∏ä‡∏µ‡∏ú‡∏π‡πâ‡∏õ‡πà‡∏ß‡∏¢‡πÉ‡∏´‡∏°‡πà</a>
    </div>
  </div>
</section>

<script>
function filterPatients(){
  const q = (document.getElementById('q').value || '').toLowerCase();
  const rows = Array.from(document.querySelectorAll('#pt-body tr'));
  rows.forEach(r => {
    const text = r.innerText.toLowerCase();
    r.style.display = text.includes(q) ? '' : 'none';
  });
}
</script>
<%- include('partials/foot') %>
